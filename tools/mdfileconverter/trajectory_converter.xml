<tool id="traj_converter" name="Trajectory converter (MDTraj)" version="1.9.1">
    <description>- interconvert between MD trajectory file formats: xtc, trr and dcd.</description>
    <requirements>
        <requirement type="package" version="1.9.1">mdtraj</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[

        ln -s '$input_file' ./input.$input.input_format &&
        mdconvert ./input.$input.input_format -o ./output.${output_format} &&
        cp ./output.${output_format} $output
        
    ]]></command>
    <inputs>
        <conditional name="input">
            <param name="input_format" type="select" label="File format of input">
                <option value="trr">TRR file</option>
                <option value="xtc">XTC file</option>
                <option value="dcd">DCD file</option>
            </param>
            <when value="trr">
                <param argument="input_file" type="data" format='trr' label="TRR input file for conversion"/>
            </when>
            <when value="xtc">
                <param argument="input_file" type="data" format='xtc' label="XTC input file for conversion"/>
            </when>
            <when value="dcd">
                <param argument="input_file" type="data" format='dcd' label="DCD input file for conversion"/>
            </when>
        </conditional>

        <param argument="output_format" type="select" label="Output">
            <option value="trr">TRR file</option>
            <option value="xtc">XTC file</option>
            <option value="dcd">DCD file</option>
        </param>
    </inputs>
    <outputs>
        <data name="output" auto_format="true" />
    </outputs> 
    <tests>
        <test>
            <param name="input_format" value="xtc" />
            <param name="output_format" value="dcd" />
            <param name="input_file" value="traj.xtc" />
            <output name="output" file="traj.dcd" compare="sim_size"/>
        </test>
        <test>
            <param name="input_format" value="dcd" />
            <param name="output_format" value="trr" />
            <param name="input_file" value="traj.dcd" />
            <output name="output" file="traj.trr"/>
        </test>
    </tests>
    <help><![CDATA[
**What it does**
        
This tool interconverts between MD trajectory file formats: xtc, trr and dcd.

_____


.. class:: infomark

**Input**

       - Trajectory file (trr, xtc, dcd).
     
_____

        
.. class:: infomark

**Output**

       - Trajectory file (trr, xtc, dcd).
    ]]></help>
    <citations>
        <citation type="doi">10.1016/j.bpj.2015.08.015</citation>
    </citations>
</tool>